!function(){Ember.Yannotate=Ember.Namespace.create(),Ember.Yannotate.VERSION="0.0.1",Ember.libraries&&Ember.libraries.register("Ember Yannotate",Ember.Yannotate.VERSION)}(),function(){$.fn.yannotate=function(a){return new window._Yannotate(this,a),this},Yannotate=window._Yannotate=function(a,b){this.opts=b,YoutubeAPI.loadVideoById(this.opts.videoId),YoutubeAPI.onPlayerStarted=this.opts.onPlayerStarted,this.setVideoDimensions(),YoutubeAPI.ready&&void 0===YoutubeAPI.player&&YoutubeAPI.createPlayer()},Yannotate.prototype.setVideoDimensions=function(){void 0===this.opts.dimensions||"default"==this.opts.dimensions?YoutubeAPI.scale(600,800):"relative"==this.opts.dimensions?YoutubeAPI.scale(screen.height/1.19936170213/1.65,screen.width/1.37142857143/1.65):(dimensions=this.opts.dimensions.match(/(\d+)(?:\*|x)(\d+)/))&&YoutubeAPI.scale(dimensions[2],dimensions[1])}}(),function(){var a=window._YoutubeIframeAPI=function(){var a=document.getElementsByTagName("script")[0],b=document.createElement("script");b.src="https://www.youtube.com/iframe_api",a.parentNode.insertBefore(b,a),this.video={},this.ready=!1};a.prototype.onPlayerReady=function(){},a.prototype.onPlayerStateChange=function(a){switch(a.data){case YT.PlayerState.ENDED:break;case YT.PlayerState.PLAYING:YoutubeAPI.onPlayerStarted();break;case YT.PlayerState.PAUSED:break;case YT.PlayerState.BUFFERING:break;case YT.PlayerState.CUED:}},a.prototype.stopOnClick=function(a){var b=this;$(a).on("click",function(){b.player.stopVideo()})},a.prototype.loadVideoById=function(a){this.video.id=a},a.prototype.scale=function(a,b){this.video.height=a,this.video.width=b},a.prototype.createPlayer=function(){this.video.id&&(this.player=new YT.Player("yannotate-player",{height:this.video.height,width:this.video.width,videoId:this.video.id,playerVars:{autohide:1,wmode:"transparent",theme:"light"},events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}}))},window.onYouTubeIframeAPIReady=function(){YoutubeAPI.ready=!0,YoutubeAPI.createPlayer()},window.YoutubeAPI=new window._YoutubeIframeAPI}(),function(){Ember.Yannotate.YannotateComponent=Ember.Component.extend({layoutName:"components/yannotate",init:function(){this._super(),this.current_user=this.get("user"),this.replay=this.get("replay"),this.set("isCurrentAnalyst",!1)},didInsertElement:function(){var a=this,b=a.get("replay").video_id;$("#yannotate-player").yannotate({videoId:b,dimensions:"relative",onPlayerStarted:function(){a.set("isAnalysing",!0)}}),this.replay.user.id==this.user.id&&this.set("isCurrentAnalyst",!0)},actions:{startAnalysis:function(){this.set("isAnalysing",!0),YoutubeAPI.player.playVideo()},addTimeLineEntry:function(){console.log(YoutubeAPI.player.getCurrentTime())}}}),Ember.Handlebars.helper("yannotate-ui",Ember.Yannotate.YannotateComponent)}(),function(){Ember.Yannotate.PlayerContainer=Ember.View.extend({templateName:"yannotate-player",classNames:["ember-yannotate-container"]}),Ember.Yannotate.AnalysesContainer=Ember.View.extend({templateName:"analyses-container",classNames:["analyses-container"]}),Ember.Yannotate.GeneralComment=Ember.View.extend({templateName:"analysis/general-comment",classNames:["general-comment"]}),Ember.Yannotate.Timeline=Ember.View.extend({tagName:"ul",templateName:"analysis/timeline",classNames:["timeline"]}),Ember.Yannotate.TimelineEntry=Ember.View.extend({tagName:"li",templateName:"analysis/timeline-entry",classNames:["timeline-entry"],isEditingEntry:!1,actions:{editEntry:function(){this.set("isEditingEntry",!0)},saveEntry:function(){this.set("isEditingEntry",!1)}}})}(),function(){Ember.Yannotate.EditEntryHelper=Ember.TextField.extend({didInsertElement:function(){this.$().focus()},focusOut:function(){console.log("focused out"),this.get("parentView").send("saveEntry")}}),Ember.Handlebars.helper("edit-entry",Ember.Yannotate.EditEntryHelper)}(),function(){Ember.Handlebars.registerBoundHelper("capitalize",function(a){return a}),Ember.Handlebars.registerBoundHelper("upcase",function(a){return a}),Ember.Handlebars.registerBoundHelper("excerpt",function(a,b){return"object"==typeof b&&(b=50),a.slice(0,b)+"..."})}(),function(){Ember.TEMPLATES["analyses-container"]=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return b.buffer.push('\n  <div class="analysis">\n    <div class="analyst-information">\n      '),b.buffer.push(j((d=c.capitalize||a&&a.capitalize,e={hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b},d?d.call(a,"analysis.user.name",e):i.call(a,"capitalize","analysis.user.name",e)))),b.buffer.push("\n      <strong>"),b.buffer.push(j((d=c.capitalize||a&&a.capitalize,e={hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b},d?d.call(a,"analysis.user.league",e):i.call(a,"capitalize","analysis.user.league",e)))),b.buffer.push("</strong>\n    </div>\n\n    "),b.buffer.push(j(c.view.call(a,"Ember.Yannotate.GeneralComment",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push("\n    "),b.buffer.push(j(c.view.call(a,"Ember.Yannotate.Timeline",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push("\n  </div>\n"),f}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var g,h="",i=c.helperMissing,j=this.escapeExpression,k=this;return g=c.each.call(b,"analysis","in","replay.analyses",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,f,e),contexts:[b,b,b],types:["ID","ID","ID"],data:e}),(g||0===g)&&e.buffer.push(g),e.buffer.push("\n"),h}),Ember.TEMPLATES["analysis/general-comment"]=Ember.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var f,g,h="",i=c.helperMissing,j=this.escapeExpression;return e.buffer.push('<div class="analysis-general-comment">\n  '),e.buffer.push(j((f=c.capitalize||b&&b.capitalize,g={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},f?f.call(b,"analysis.content.general",g):i.call(b,"capitalize","analysis.content.general",g)))),e.buffer.push("\n</div>\n"),h}),Ember.TEMPLATES["analysis/timeline-entry"]=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return b.buffer.push("\n    "),b.buffer.push(n((d=c["edit-entry"]||a&&a["edit-entry"],e={hash:{"class":"edit-entry",value:"entry.content"},hashTypes:{"class":"STRING",value:"ID"},hashContexts:{"class":a,value:a},contexts:[],types:[],data:b},d?d.call(a,e):m.call(a,"edit-entry",e)))),b.buffer.push("\n  "),f}function g(a,b){var d,e="";return b.buffer.push('\n    <span class="comment" '),b.buffer.push(n(c.action.call(a,"editEntry",{hash:{on:"doubleClick",target:"view"},hashTypes:{on:"STRING",target:"STRING"},hashContexts:{on:a,target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">"),d=c._triageMustache.call(a,"entry.content",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["ID"],data:b}),(d||0===d)&&b.buffer.push(d),b.buffer.push("</span>\n  "),e}function h(a,b){var d,e="";return b.buffer.push("\n    "),d=c["if"].call(a,"view.isEditingEntry",{hash:{},hashTypes:{},hashContexts:{},inverse:o.program(8,j,b),fn:o.program(6,i,b),contexts:[a],types:["ID"],data:b}),(d||0===d)&&b.buffer.push(d),b.buffer.push("\n  "),e}function i(a,b){var d="";return b.buffer.push("\n      <button "),b.buffer.push(n(c.action.call(a,"saveEntry",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">Save</button>\n    "),d}function j(a,b){var d="";return b.buffer.push("\n      <button "),b.buffer.push(n(c.action.call(a,"editEntry",{hash:{target:"view"},hashTypes:{target:"STRING"},hashContexts:{target:a},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">Edit</button>\n    "),d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var k,l="",m=c.helperMissing,n=this.escapeExpression,o=this;return e.buffer.push("<strong>"),k=c._triageMustache.call(b,"entry.time",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(k||0===k)&&e.buffer.push(k),e.buffer.push('</strong>\n<div class="timeline-entry-block">\n  '),k=c["if"].call(b,"view.isEditingEntry",{hash:{},hashTypes:{},hashContexts:{},inverse:o.program(3,g,e),fn:o.program(1,f,e),contexts:[b],types:["ID"],data:e}),(k||0===k)&&e.buffer.push(k),e.buffer.push("\n  "),k=c["if"].call(b,"isCurrentAnalyst",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(5,h,e),contexts:[b],types:["ID"],data:e}),(k||0===k)&&e.buffer.push(k),e.buffer.push("\n\n</div>\n"),l}),Ember.TEMPLATES["analysis/timeline"]=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d="";return b.buffer.push("\n  "),b.buffer.push(h(c.view.call(a,"Ember.Yannotate.TimelineEntry",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push("\n"),d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var g,h=this.escapeExpression,i=this;g=c.each.call(b,"entry","in","analysis.content.timeline",{hash:{},hashTypes:{},hashContexts:{},inverse:i.noop,fn:i.program(1,f,e),contexts:[b,b,b],types:["ID","ID","ID"],data:e}),e.buffer.push(g||0===g?g:"")}),Ember.TEMPLATES["components/yannotate"]=Ember.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var f="",g=this.escapeExpression;return e.buffer.push(g(c.view.call(b,"Ember.Yannotate.PlayerContainer",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}))),e.buffer.push("\n"),e.buffer.push(g(c.view.call(b,"Ember.Yannotate.AnalysesContainer",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}))),f}),Ember.TEMPLATES["yannotate-player"]=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d="";return b.buffer.push("\n      <button "),b.buffer.push(m(c.action.call(a,"addGeneralComment",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">Add a general comment</button>\n      <button "),b.buffer.push(m(c.action.call(a,"addTimeLineEntry",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">Add an entry to timeline</button>\n    "),d}function g(a,b){var d="";return b.buffer.push("\n      <button "),b.buffer.push(m(c.action.call(a,"startAnalysis",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">Analyse !</button>\n    "),d}function h(a,b){var d="";return b.buffer.push("\n        <li><a "),b.buffer.push(m(c.action.call(a,"",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">Edit</a></li>\n      "),d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var i,j,k,l="",m=this.escapeExpression,n=c.helperMissing,o=this;return e.buffer.push('<div class="replay-header">\n  <h2>'),e.buffer.push(m((j=c.capitalize||b&&b.capitalize,k={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},j?j.call(b,"replay.champion",k):n.call(b,"capitalize","replay.champion",k)))),e.buffer.push(" vs "),e.buffer.push(m((j=c.capitalize||b&&b.capitalize,k={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},j?j.call(b,"replay.matchup",k):n.call(b,"capitalize","replay.matchup",k)))),e.buffer.push(" - "),e.buffer.push(m((j=c.capitalize||b&&b.capitalize,k={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},j?j.call(b,"replay.lane",k):n.call(b,"capitalize","replay.lane",k)))),e.buffer.push(' lane</h2>\n  <strong class="replay-match-result">'),e.buffer.push(m((j=c.upcase||b&&b.upcase,k={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},j?j.call(b,"replay.result",k):n.call(b,"upcase","replay.result",k)))),e.buffer.push('</strong>\n</div>\n\n<div class="replay-container">\n  <div id="yannotate-player"></div>\n</div>\n\n<div class="replay-data">\n\n  <div class="player-information">\n    <h3>'),e.buffer.push(m((j=c.capitalize||b&&b.capitalize,k={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},j?j.call(b,"replay.user.name",k):n.call(b,"capitalize","replay.user.name",k)))),e.buffer.push('</h3>\n    <strong class="player-league">'),e.buffer.push(m((j=c.capitalize||b&&b.capitalize,k={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},j?j.call(b,"replay.user.league",k):n.call(b,"capitalize","replay.user.league",k)))),e.buffer.push('</strong>\n  </div>\n\n  <div class="replay-description">\n    '),e.buffer.push(m((j=c.excerpt||b&&b.excerpt,k={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},j?j.call(b,"replay.description",k):n.call(b,"excerpt","replay.description",k)))),e.buffer.push('\n  </div>\n\n  <div class="replay-information">\n    <ul>\n      <li>'),i=c._triageMustache.call(b,"replay.kda.k",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(i||0===i)&&e.buffer.push(i),e.buffer.push("/"),i=c._triageMustache.call(b,"replay.kda.d",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(i||0===i)&&e.buffer.push(i),e.buffer.push("//"),i=c._triageMustache.call(b,"replay.kda.a",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(i||0===i)&&e.buffer.push(i),e.buffer.push("</li>\n      <li>"),i=c._triageMustache.call(b,"replay.length",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(i||0===i)&&e.buffer.push(i),e.buffer.push("</li>\n      <li>"),i=c._triageMustache.call(b,"replay.patch",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(i||0===i)&&e.buffer.push(i),e.buffer.push('</li>\n    </ul>\n  </div>\n\n  <div class="replay-toolbar">\n    '),i=c["if"].call(b,"isAnalysing",{hash:{},hashTypes:{},hashContexts:{},inverse:o.program(3,g,e),fn:o.program(1,f,e),contexts:[b],types:["ID"],data:e}),(i||0===i)&&e.buffer.push(i),e.buffer.push('\n\n    <ul>\n      <li><a href="#">Download LPR</a></li>\n      <li><a '),e.buffer.push(m(c.action.call(b,"",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["STRING"],data:e}))),e.buffer.push(">Report</a></li>\n      "),i=c["if"].call(b,"isCurrentAnalyst",{hash:{},hashTypes:{},hashContexts:{},inverse:o.noop,fn:o.program(5,h,e),contexts:[b],types:["ID"],data:e}),(i||0===i)&&e.buffer.push(i),e.buffer.push("\n    </ul>\n  </div>\n</div> <!-- replay-information -->\n"),l})}();