!function(){Ember.Yannotate=Ember.Namespace.create(),Ember.Yannotate.VERSION="0.0.1",Ember.libraries&&Ember.libraries.register("Ember Yannotate",Ember.Yannotate.VERSION)}(),function(){$.fn.yannotate=function(a){return new window._Yannotate(this,a),this},Yannotate=window._Yannotate=function(a,b){this.opts=b,YoutubeAPI.loadVideoById(this.opts.videoId),YoutubeAPI.onPlayerStarted=this.opts.onPlayerStarted,this.setVideoDimensions(),YoutubeAPI.ready&&void 0===YoutubeAPI.player&&YoutubeAPI.createPlayer()},Yannotate.prototype.setVideoDimensions=function(){void 0===this.opts.dimensions||"default"==this.opts.dimensions?YoutubeAPI.scale(600,800):"relative"==this.opts.dimensions?YoutubeAPI.scale(screen.height/1.19936170213/1.65,screen.width/1.37142857143/1.65):(dimensions=this.opts.dimensions.match(/(\d+)(?:\*|x)(\d+)/))&&YoutubeAPI.scale(dimensions[2],dimensions[1])}}(),function(){var a=window._YoutubeIframeAPI=function(){var a=document.getElementsByTagName("script")[0],b=document.createElement("script");b.src="https://www.youtube.com/iframe_api",a.parentNode.insertBefore(b,a),this.video={},this.ready=!1};a.prototype.onPlayerReady=function(){},a.prototype.onPlayerStateChange=function(a){switch(a.data){case YT.PlayerState.ENDED:break;case YT.PlayerState.PLAYING:YoutubeAPI.onPlayerStarted();break;case YT.PlayerState.PAUSED:break;case YT.PlayerState.BUFFERING:break;case YT.PlayerState.CUED:}},a.prototype.stopOnClick=function(a){var b=this;$(a).on("click",function(){b.player.stopVideo()})},a.prototype.loadVideoById=function(a){this.video.id=a},a.prototype.scale=function(a,b){this.video.height=a,this.video.width=b},a.prototype.createPlayer=function(){this.video.id&&(this.player=new YT.Player("yannotate-player",{height:this.video.height,width:this.video.width,videoId:this.video.id,playerVars:{autohide:1,wmode:"transparent",theme:"light"},events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}}))},window.onYouTubeIframeAPIReady=function(){YoutubeAPI.ready=!0,YoutubeAPI.createPlayer()},window.YoutubeAPI=new window._YoutubeIframeAPI}(),function(){Ember.Handlebars.registerBoundHelper("capitalize",function(a){return a.capitalize()}),Ember.Handlebars.registerBoundHelper("upcase",function(a){return a.toUpperCase()}),Ember.Handlebars.registerBoundHelper("excerpt",function(a,b){return"object"==typeof b&&(b=50),a.slice(0,b)+"..."})}(),function(){Ember.Yannotate.YannotateComponent=Ember.Component.extend({layoutName:"components/yannotate",init:function(){this._super(),this.current_user=this.get("user"),this.replay=this.get("replay")},didInsertElement:function(){var a=this,b=a.get("replay").video_id;$("#yannotate-player").yannotate({videoId:b,dimensions:"relative",onPlayerStarted:function(){a.set("isAnalysing",!0)}})},actions:{startAnalysis:function(){this.set("isAnalysing",!0),YoutubeAPI.player.playVideo()},addTimeLineEntry:function(){console.log(YoutubeAPI.player.getCurrentTime())}}}),Ember.Handlebars.helper("yannotate-ui",Ember.Yannotate.YannotateComponent)}(),function(){Ember.Yannotate.PlayerContainer=Ember.View.extend({templateName:"yannotate-player",classNames:["ember-yannotate-container"]}),Ember.Yannotate.AnnotationsContainer=Ember.View.extend({classNames:["ember-yannotate-container"]})}(),function(){Ember.TEMPLATES["components/yannotate"]=Ember.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var f="",g=this.escapeExpression;return e.buffer.push(g(c.view.call(b,"Ember.Yannotate.PlayerContainer",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}))),e.buffer.push("\n"),e.buffer.push(g(c.view.call(b,"Ember.Yannotate.AnnotationsContainer",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}))),f}),Ember.TEMPLATES["yannotate-player"]=Ember.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d="";return b.buffer.push("\n      <button "),b.buffer.push(l(c.action.call(a,"addGeneralComment",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">Add a general comment</button>\n      <button "),b.buffer.push(l(c.action.call(a,"addTimeLineEntry",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">Add an entry to timeline</button>\n    "),d}function g(a,b){var d="";return b.buffer.push("\n      <button "),b.buffer.push(l(c.action.call(a,"startAnalysis",{hash:{},hashTypes:{},hashContexts:{},contexts:[a],types:["STRING"],data:b}))),b.buffer.push(">Analyse !</button>\n    "),d}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,Ember.Handlebars.helpers),e=e||{};var h,i,j,k="",l=this.escapeExpression,m=c.helperMissing,n=this;return e.buffer.push('<div class="replay-header">\n  <h2>'),e.buffer.push(l((i=c.capitalize||b&&b.capitalize,j={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},i?i.call(b,"replay.champion",j):m.call(b,"capitalize","replay.champion",j)))),e.buffer.push(" vs "),e.buffer.push(l((i=c.capitalize||b&&b.capitalize,j={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},i?i.call(b,"replay.matchup",j):m.call(b,"capitalize","replay.matchup",j)))),e.buffer.push(" - "),e.buffer.push(l((i=c.capitalize||b&&b.capitalize,j={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},i?i.call(b,"replay.lane",j):m.call(b,"capitalize","replay.lane",j)))),e.buffer.push(' lane</h2>\n  <strong class="replay-match-result">'),e.buffer.push(l((i=c.upcase||b&&b.upcase,j={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},i?i.call(b,"replay.result",j):m.call(b,"upcase","replay.result",j)))),e.buffer.push('</strong>\n</div>\n\n<div class="replay-container">\n  <div id="yannotate-player"></div>\n</div>\n\n<div class="replay-data">\n\n  <div class="player-information">\n    <h3>'),e.buffer.push(l((i=c.capitalize||b&&b.capitalize,j={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},i?i.call(b,"replay.user.name",j):m.call(b,"capitalize","replay.user.name",j)))),e.buffer.push('</h3>\n    <strong class="player-league">'),e.buffer.push(l((i=c.capitalize||b&&b.capitalize,j={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},i?i.call(b,"replay.user.league",j):m.call(b,"capitalize","replay.user.league",j)))),e.buffer.push('</strong>\n  </div>\n\n  <div class="replay-description">\n    '),e.buffer.push(l((i=c.excerpt||b&&b.excerpt,j={hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e},i?i.call(b,"replay.description",j):m.call(b,"excerpt","replay.description",j)))),e.buffer.push('\n  </div>\n\n  <div class="replay-information">\n    <ul>\n      <li>'),h=c._triageMustache.call(b,"replay.kda.k",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(h||0===h)&&e.buffer.push(h),e.buffer.push("/"),h=c._triageMustache.call(b,"replay.kda.d",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(h||0===h)&&e.buffer.push(h),e.buffer.push("//"),h=c._triageMustache.call(b,"replay.kda.a",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(h||0===h)&&e.buffer.push(h),e.buffer.push("</li>\n      <li>"),h=c._triageMustache.call(b,"replay.length",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(h||0===h)&&e.buffer.push(h),e.buffer.push("</li>\n      <li>"),h=c._triageMustache.call(b,"replay.patch",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(h||0===h)&&e.buffer.push(h),e.buffer.push('</li>\n    </ul>\n  </div>\n\n  <div class="replay-toolbar">\n    '),h=c._triageMustache.call(b,"poney",{hash:{},hashTypes:{},hashContexts:{},contexts:[b],types:["ID"],data:e}),(h||0===h)&&e.buffer.push(h),e.buffer.push("\n    "),h=c["if"].call(b,"isAnalysing",{hash:{},hashTypes:{},hashContexts:{},inverse:n.program(3,g,e),fn:n.program(1,f,e),contexts:[b],types:["ID"],data:e}),(h||0===h)&&e.buffer.push(h),e.buffer.push("\n  </div>\n</div> <!-- replay-information -->\n"),k})}();